<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="./output.css" rel="stylesheet">
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100">
    <aside id="default-sidebar" class="fixed top-0 left-0 z-40 w-64 h-screen transition-transform -translate-x-full sm:translate-x-0" aria-label="Sidebar">
        <div class="h-full px-3 py-4 overflow-y-auto bg-gray-50 dark:bg-gray-800">
           <ul class="space-y-2 font-medium">
              <li>
                 <a href="#" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group">
                    <svg class="w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 21">
                       <path d="M16.975 11H10V4.025a1 1 0 0 0-1.066-.998 8.5 8.5 0 1 0 9.039 9.039.999.999 0 0 0-1-1.066h.002Z"/>
                       <path d="M12.5 0c-.157 0-.311.01-.565.027A1 1 0 0 0 11 1.02V10h8.975a1 1 0 0 0 1-.935c.013-.188.028-.374.028-.565A8.51 8.51 0 0 0 12.5 0Z"/>
                    </svg>
                    <span class="ms-3">Dashboard</span>
                 </a>
              </li>
              <li>
                 <a href="admin.html" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group">
                    <svg class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 18 20">
                       <path d="M17 5.923A1 1 0 0 0 16 5h-3V4a4 4 0 1 0-8 0v1H2a1 1 0 0 0-1 .923L.086 17.846A2 2 0 0 0 2.08 20h13.84a2 2 0 0 0 1.994-2.153L17 5.923ZM7 9a1 1 0 0 1-2 0V7h2v2Zm0-5a2 2 0 1 1 4 0v1H7V4Zm6 5a1 1 0 1 1-2 0V7h2v2Z"/>
                    </svg>
                    <span class="flex-1 ms-3 whitespace-nowrap">Products</span>
                 </a>
              </li>
              <li>
                 <a href="categories.html" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group">
                    <svg class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 18 18">
                       <path d="M6.143 0H1.857A1.857 1.857 0 0 0 0 1.857v4.286C0 7.169.831 8 1.857 8h4.286A1.857 1.857 0 0 0 8 6.143V1.857A1.857 1.857 0 0 0 6.143 0Zm10 0h-4.286A1.857 1.857 0 0 0 10 1.857v4.286C10 7.169 10.831 8 11.857 8h4.286A1.857 1.857 0 0 0 18 6.143V1.857A1.857 1.857 0 0 0 16.143 0Zm-10 10H1.857A1.857 1.857 0 0 0 0 11.857v4.286C0 17.169.831 18 1.857 18h4.286A1.857 1.857 0 0 0 8 16.143v-4.286A1.857 1.857 0 0 0 6.143 10Zm10 0h-4.286A1.857 1.857 0 0 0 10 11.857v4.286c0 1.026.831 1.857 1.857 1.857h4.286A1.857 1.857 0 0 0 18 16.143v-4.286A1.857 1.857 0 0 0 16.143 10Z"/>
                    </svg>
                    <span class="flex-1 ms-3 whitespace-nowrap">Categories</span>
                 </a>
              </li>
           </ul>
        </div>
     </aside>

    <div class="flex">
        <div class="p-4 sm:ml-64">
            <div class="mb-4">
                <input type="text" placeholder="Name of categories" id="name" class="p-2 border border-gray-300 rounded mr-2 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"" />
                <button type="button" onclick="SaveCategories()" id="save" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Save</button>
            </div>
    
            <div class="overflow-x-auto">
                <table class="w-full text-left border-collapse border border-gray-300 dark:border-gray-700">
                    <thead class="bg-gray-200 dark:bg-customGreen2">
                        <tr>
                            <th class="p-2 border border-gray-300 dark:border-gray-700">No.</th>
                            <th class="p-2 border border-gray-300 dark:border-gray-700">Name Category</th>
                            <th class="p-2 border border-gray-300 dark:border-gray-700">Action</th>
                        </tr>
                    </thead>
                    <tbody id="result" class="bg-white dark:bg-gray-800">
                        <tr>
                            <td class="p-2 border border-gray-300 dark:border-gray-700">1</td>
                            <td class="p-2 border border-gray-300 dark:border-gray-700">Furniture</td>
                            <td class="p-2 border border-gray-300 dark:border-gray-700">
                                <button type="button" class="bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600" onclick="DeleteCategories(1)">Delete</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
        const GetCategories = async () => {
            await axios.get('http://localhost:3000/categories')
                .then((response) => {
                    console.log(response.data);
                    const category = response.data;
                    let bucket = '';
                    category.forEach((categories, index) => {
                        bucket += `
                            <tr>
                                <td class="p-2 border border-gray-300 dark:border-gray-700">${index + 1}</td>
                                <td class="p-2 border border-gray-300 dark:border-gray-700">${categories.name}</td>
                                <td class="p-2 border border-gray-300 dark:border-gray-700">
                                    <button type="button" class="bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600" onclick="EditCategories('${categories.id}')">Edit</button>
                                    <button type="button" class="bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600" onclick="DeleteCategories('${categories.id}')">Delete</button>
                                </td>
                            </tr>
                        `;
                    });
                    document.getElementById('result').innerHTML = bucket;
                })
                .catch((error) => {
                    alert(error.message);
                })
        }
        document.addEventListener('DOMContentLoaded', function() {
            GetCategories();
        });

        const SaveCategories = async () => {
            let name = document.getElementById('name').value;
            await axios.post('http://localhost:3000/categories', {
                name: name,
            })
            .then((response) => {
                console.log(response);
                GetCategories();
            })
            .catch((error) => {
                alert(error.message);
            })
        }
        const DeleteCategories = async (id) => {
            const confirmVal = confirm('Apakah data akan dihapus?');
            if (confirmVal) {
                await axios.delete(`http://localhost:3000/categories/${id}`)
                .then((response) => {
                    console.log(response);
                    GetCategories();
                })
                .catch((error) => {
                    alert(error.message);
                })
            }
        }

        const EditCategories = async (id) => {
            await axios.get(`http://localhost:3000/categories/${id}`)
            .then((response) => {
                const categories = response.data;
                document.getElementById("name").value = categories.name;
                document.getElementById("save").innerText = "Update";
                document.getElementById("save").setAttribute('onclick', `UpdateCategories('${id}')`);
                console.log(response);
            })
            .catch((error) => {
                alert(error.message);
            })
        }
        const UpdateCategories = async (id) => {
            let name = document.getElementById('name').value;
            await axios.patch(`http://localhost:3000/categories/${id}`, {
                name: name,
            })
            .then((response) => {
                console.log(response);
                document.getElementById("name").value = "";
                document.getElementById("save").innerText = "Save";
                document.getElementById("save").setAttribute('onclick', `SaveCategories()`);
                GetCategories();
            })
            .catch((error) => {
                alert(error.message);
            })
        }

        // Navbar toggle functionality
        function toggleMenu() {
            let navbar = document.getElementById('navbar-hamburger');
            navbar.classList.toggle('hidden');
        }

        document.getElementById('menu-toggle').addEventListener('click', function(event) {
            event.stopPropagation();
            toggleMenu();
        });

        document.addEventListener('click', function(event) {
            let navbar = document.getElementById('navbar-hamburger');
            if (!navbar.classList.contains('hidden') && !navbar.contains(event.target)) {
                navbar.classList.add('hidden');
            }
        });
    </script>
</body>
</html>
